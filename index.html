<html>

<head>
    <base href="/">
    <script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="bower_components/polymer/polymer.html"></link>
    <link rel="import" href="bower_components/iron-elements/iron-elements.html"></link>
    <link rel="import" href="bower_components/app-elements/app-elements.html"></link>
</head>

<body>

    <my-app></my-app>

    <dom-module id="my-app">
        <template>
            <app-location use-hash-as-path route="{{route}}"></app-location>
            <app-route route="{{route}}" pattern="/:country" data="{{routeData}}"></app-route>
            <p>Selected country: [[routeData.country]]</p>
            <country-selector name="country" country="{{routeData.country}}"></country-selector>
        </template>
        <script>
            Polymer({
                is: 'my-app'
            });
        </script>
    </dom-module>

    <dom-module id="country-selector">
        <template>
            <button on-tap="selectNL">nl</button>
        </template>
        <script>
            Polymer({
                is: 'country-selector',
                properties: {
                    country: {
                        type: String,
                        notify: true
                    }
                },
                created() {
                    // TODO: REMOVE!! when we remove `use-hash-as-path`
                    if (!window.location.hash) {
                        window.location.hash = '/';
                    }
                },
                selectNL() {
                    this.set('country', 'nl');
                }
            })
        </script>
    </dom-module>
</body>

</html>